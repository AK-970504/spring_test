<!DOCTYPE html>
<html xmlns:th = "http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<title>
			商品詳細
		</title>
		<link th:href="@{/product/css/productDetail.css}" rel="stylesheet">
		<link th:href="@{/common/css/header.css}" rel="stylesheet">
		<link th:href="@{/common/css/footer.css}" rel="stylesheet">
		<script th:src="@{/product/js/productDetail.js}" type="text/javascript">
		</script>
	</head>
	<body>
		<header th:replace="common/header :: layout_header">
		</header>
		<main>
			<div class="detail_main">
				<div class="detail_list_01">
					<h1>
						商品詳細画面
					</h1>
					<section class="product_detail">
						<div class="product_detail_img">
							<img th:src="@{'/product/productDetail/image/' + ${productDetail.product_id}}" alt="商品画像">
						</div>
						<div class="product_detail_list">
							<div>
								<p>
									商品名：
								</p>
								<span th:text="${productDetail.product_name}">
								</span>
							</div>
							<div>
								<p>
									メーカー名：
									</p>
								<span th:text="${productDetail.company.company_name}">
								</span>
							</div>
							<div>
								<p>
									価格：
								</p>
								<span th:text="${#numbers.formatDecimal(productDetail.price, 0, 'COMMA', 0, 'POINT')}">
								</span>
								<p>
									円
								</p>
							</div>
							<div>
								<p>
									税込価格：
								</p>
								<span th:text="${#numbers.formatDecimal(productDetail.tax_price, 0, 'COMMA', 0, 'POINT')}">
								</span>
								<p>
									円
								</p>
							</div>
							<div>
								<p>
									在庫数：
								</p>
								<span th:text="${#numbers.formatDecimal(productDetail.stock, 0, 'COMMA', 0, 'POINT')}">
								</span>
								<p>
									個
								</p>
							</div>
						</div>
					</section>
					<section class="reviews">
						<h3>
							＜口コミ＞
						</h3>
						<!-- レビューがない場合 -->
						<div th:if="${#lists.isEmpty(reviews)}">
							口コミはまだありません。
						</div>
						<!-- レビューがある場合 -->
						<div th:each="review : ${reviews}">
							<div class="user_name">
								<p>
									ユーザー名：
								</p>
								<span th:text="${review.dummy_user_name}">
								</span>
							</div>
							<div class="comment">
								<p>
									コメント：
								</p>
								<span th:text="${review.comment}">
								</span>
							</div>
							<div class="evaluation">
								<p>
									評価（5段階）：
								</p>
								<span th:text="${review.rating}">
								</span>
							</div>
							<div class="post_time">
								<p>
									投稿日時：
								</p>
								<span th:text="${#temporals.format(review.createdAt, 'yyyy年MM月dd日 HH:mm')}">
								</span>
							</div>
						</div>
					</section>
					<section class="product_btn">
						<div class="btn_main">
							<div class="purchase_btn">
								<form th:action="@{/purchase/purchaseDetail}" method="post">
									<input type="hidden" name="product_id" th:value="${productDetail.product_id}">
									<input type="hidden" name="quantity" value="1">
									<button class="single_purchase" type="submit">
										単品購入
									</button>
								</form>
							</div>
						</div>
						<div class="reviews_btn">
							<a th:href="@{/review/reviewPost/{productId}(productId=${productDetail.product_id})}">
								口コミ投稿
							</a>
						</div>
					</section>
				</div>
				<div class="detail_list_02">
					<section>
						<form th:action="@{/cart/add}" method="post">
							<input type="hidden" name="product_id" th:value="${productDetail.product_id}">
							<div>
								<button class="cart_addition" type="submit">
									カートに入れる
								</button>
							</div>
							<div>
								<p>
									数量：
								</p>
								<br>
								<select class="cart_quantity" name="quantity" required>
									<option value="">
									</option>
									<option th:each="i : ${#numbers.sequence(1, 20)}" th:value="${i}" th:text="${i}">
									</option>
								</select>
							</div>
							<div>
								<p>
									価格：
								</p>
								<span th:text="${#numbers.formatDecimal(productDetail.price, 0, 'COMMA', 0, 'POINT')}">
								</span>
								<p>
									円
								</p>
							</div>
							<div>
								<p>
									税込価格：
								</p>
								<span th:text="${#numbers.formatDecimal(productDetail.tax_price, 0, 'COMMA', 0, 'POINT')}">
								</span>
								<p>
									円
								</p>
							</div>
							<div>
								<p>
									在庫表示：
								</p>
								<span th:text="${#numbers.formatDecimal(productDetail.stock, 0, 'COMMA', 0, 'POINT')}">
								</span>
								<p>
									個
								</p>
							</div>
						</form>
						<p class="message_success" th:if="${cartSuccess}" th:text="${cartSuccess}">							
						</p>
					</section>
				</div>
			</div>
		</main>
		<footer th:replace="common/footer :: layout_footer">
		</footer>
	</body>
</html>